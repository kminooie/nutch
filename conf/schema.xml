<?xml version="1.0" encoding="UTF-8" ?>
<!--
   this the schema file for 2locos solr deployment
-->

<schema name="2locos" version="1.5">
<types>
   <fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>

   <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>

   <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
   <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
   <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
   <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>

   <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true" precisionStep="6" positionIncrementGap="0"/>
   
   <fieldType name="text_en_general" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
      <analyzer type="index">
         <tokenizer class="solr.StandardTokenizerFactory"/>
         <filter class="solr.LowerCaseFilterFactory"/>
         <filter class="solr.StopFilterFactory" words="lang/stopwords_en.txt"/>
         <filter class="solr.StopFilterFactory" words="stopwords.txt"/>
         <filter class="solr.EnglishMinimalStemFilterFactory"/>
      </analyzer>
      <analyzer type="query">
         <tokenizer class="solr.StandardTokenizerFactory"/>
         <filter class="solr.WordDelimiterFilterFactory" splitOnNumerics="0"/>
         <filter class="solr.LowerCaseFilterFactory"/>
         <filter class="solr.StopFilterFactory" words="stopwords.txt"/>
         <filter class="solr.EnglishMinimalStemFilterFactory"/>
      </analyzer>
   </fieldType>
    
   <fieldType name="text_en_stemmed" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
      <analyzer type="index">
         <tokenizer class="solr.StandardTokenizerFactory"/>
         <filter class="solr.LowerCaseFilterFactory"/>
         <filter class="solr.StopFilterFactory" words="lang/stopwords_en.txt"/>
         <filter class="solr.StopFilterFactory" words="stopwords_links.txt"/>

         <!-- <filter class="solr.SnowballPorterFilterFactory" language="English"/>  -->
         <filter class="solr.KStemFilterFactory"/>
      </analyzer>
      <analyzer type="query">
         <tokenizer class="solr.StandardTokenizerFactory"/>
         <filter class="solr.WordDelimiterFilterFactory" splitOnNumerics="0"/>
         <filter class="solr.LowerCaseFilterFactory"/>
         <filter class="solr.EnglishMinimalStemFilterFactory"/>
      </analyzer>
   </fieldType>

   <fieldType name="text_en_url" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
      <analyzer type="index">
         <tokenizer class="solr.StandardTokenizerFactory"/>
         <filter class="solr.WordDelimiterFilterFactory" splitOnNumerics="0" generateNumberParts="0"/>
         <filter class="solr.LengthFilterFactory" min="3" max="32"/>
         <filter class="solr.LowerCaseFilterFactory"/>
         <filter class="solr.StopFilterFactory" words="lang/stopwords_en.txt"/>
         <filter class="solr.StopFilterFactory" words="stopwords_urls.txt"/>
         <filter class="solr.KStemFilterFactory"/>
      </analyzer>
      <analyzer type="query">
         <tokenizer class="solr.StandardTokenizerFactory"/>
         <filter class="solr.WordDelimiterFilterFactory" splitOnNumerics="0"/>
         <filter class="solr.LowerCaseFilterFactory"/>
         <filter class="solr.EnglishMinimalStemFilterFactory"/>
      </analyzer>
   </fieldType>
</types>

<fields>
   <field name="id" type="string" stored="true" indexed="true" required="true"/>

   <!-- core fields -->
   <field name="segment" type="string" stored="false" indexed="false"/>
   <field name="digest" type="string" stored="false" indexed="false"/>
   <field name="boost" type="tfloat" stored="true" indexed="false"/>

   <!-- fields for index-basic plugin -->
   <field name="host" type="string" docValues="true" stored="false" indexed="false"/>
   <field name="url" type="text_en_url" stored="false" indexed="true"/>
   
   <!-- stored=true for highlighting, use term vectors  and positions for fast highlighting - term vectores was added -km -->
   <field name="content" type="text_en_general" stored="true" indexed="true" storeOffsetsWithPositions="true" />
   <field name="rawcontent" type="text_en_general" stored="true" indexed="true" storeOffsetsWithPositions="true" />
   
   <field name="title" type="text_en_general" stored="true" indexed="true" storeOffsetsWithPositions="true" />
   <!-- termVectors="true" termPositions="true" termOffsets="true" -->
   
   <field name="cache" type="string" stored="false" indexed="false"/>
   <field name="tstamp" type="tdate" stored="true" indexed="true"/>

   <!-- catch-all field -->
   <!-- field name="text" type="text_general" stored="false" indexed="true" multiValued="true"/ -->

   <!-- fields for index-anchor plugin --> <!-- will also hold the ouput of metatag.keywords -->
   <field name="anchor" type="text_en_stemmed" stored="false" indexed="true" multiValued="true"/>

   <!-- fields for index-more plugin --> <!-- turned off in nutch-site -->
   <!--
   <field name="type" type="string" stored="true" indexed="true" multiValued="true"/>
   <field name="contentLength" type="string" stored="true" indexed="false"/>
   <field name="lastModified" type="date" stored="true" indexed="false"/>
   <field name="date" type="tdate" stored="true" indexed="true"/>
   -->
   
   <!-- fields for languageidentifier plugin --><!-- turned off in nutch-site copy from index metatag -->
   <field name="lang" type="string" docValues="true" stored="false" indexed="false" default="en"/>

   <!-- fields for subcollection plugin -->
   <!-- field name="subcollection" type="string" stored="true" indexed="true" multiValued="true"/ -->

   <!-- fields for tld plugin -->    
   <!-- field name="tld" type="string" stored="false" indexed="false"/ -->

   <!-- fields for metatags --><!-- all in copy fields -->
   <dynamicField name="metatag.*" type="string" indexed="false" stored="false" multiValued="true"/>
   
   <!-- source for domain ? --> <!-- turned off in nutch-site -->
   <!-- field name="domain" type="url" stored="true" indexed="true" multiValued="false" / -->

   <!-- old fields --><!--
   <field name="host2" type="url2" stored="false" indexed="true"/>
   <field name="host3" type="url3" stored="false" indexed="true"/>
   <field name="site" type="string" stored="false" indexed="true"/>

   <field name="url2" type="url3" stored="false" indexed="true"/>

   <field name="plutoz_ranking" type="float" stored="true" indexed="true" multiValued="false" />
   <field name="user_ranking" type="float" stored="false" indexed="true" multiValued='false' />
   <field name="domain_ranking" type="float" stored="false" indexed="true"/>
   <field name="categories" type="string" stored="true" indexed="true"  multiValued="true"/>
   <field name="categories2" type="text_en" stored="false" indexed="true"  multiValued="true"/>
   <field name="terms" type="text_en" stored="false" indexed="true" multiValued="true"/>

   <field name="a_spell" type="textSpell" multiValued="true"/>   
   -->
   
   <field name="categories" type="string" docValues="true" stored="false" indexed="false" multiValued="true"/>
   
   <!-- to work with Solr 4.9 and beyond that use RealTimeGetHandler -->
   <field name="_version_" type="long" docValues="true" stored="true" indexed="false" multiValued="false"/>
</fields>

<uniqueKey>id</uniqueKey>

<copyField source="metatag.keywords" dest="anchor"/>
<copyField source="metatag.description" dest="anchor"/>
<!-- <copyField source="metatag.language" dest="lang"/> -->

</schema>

<!--    end of file     -->
